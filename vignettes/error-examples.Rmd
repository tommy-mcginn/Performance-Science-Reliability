---
title: "error-examples"
author: "Tommy McGinn"
date: "1/6/2021"
output: html_document
---

This vignette explains potential errors that could occur in entering data into the functions in psr, why they would be problematic, and shows the informative error messages that are produced when the user makes these mistakes when running the functions. TE() is used to illustrate each potential error, but entering the same data into any of the functions should produce the same error message.

# Error 1: Trials Not Labeled Uniformly Across Athletes

One potential error that could be made is the trials not being labeled in the same way across each athlete. To see an example of this, consider the following code:

```{r}
# subject <- c(1, 1, 1, 2, 2, 2, 3, 3, 3)
# trial <- c('Trial 1', 'Trial 2', 'Trial 3', 'Trial 1', 'Trial 2', 'Trial 3', 'Trial 1', 'Trial 2', 'Trial 4')
# metric_1 <- c(257, 268, 237, 275, 259, 263, 216, 287, 250)
# metric_2 <- c(1.11, 1.24, 0.89, 1.37, 1.21, 1.30, 0.75, 1.42, 1.15)
# metric_3 <- c(1272, 1493, 1072, 1046, 1198, 1165, 1478, 1370, 1335)
# TE(subject, trial, metric_1, metric_2, metric_3)
```

The problem is that subject 3's third measurement is labeled as Trial 4, rather than Trial 3, as is the case for the other two subjects. Subject 3 does not record a measurement for Trial 3, while neither Subject 1 nor Subject 2 record a measurement for Trial 4. If one were to run the following code, the following error message would show up:

```{r}
# [1] "Each athlete must have recorded a measurement for each trial"
```

This message precisely explains the issue, which is that each athlete has not recorded a measurement for each trial. This message precedes the unhelpful R message that is produced when any function does not work properly, meaning that it is visible to the user directly under the code that had just been entered.

# Error 2: Duplicate Trials for an Athlete

What if an athlete has recorded multiple measurements for one trial? An example of this is shown below:

```{r}
# subject <- c(1, 1, 1, 2, 2, 2, 3, 3, 3)
# trial <- c('Trial 1', 'Trial 2', 'Trial 3', 'Trial 1', 'Trial 2', 'Trial 3', 'Trial 1', 'Trial 2', 'Trial 2')
# metric_1 <- c(257, 268, 237, 275, 259, 263, 216, 287, 250)
# metric_2 <- c(1.11, 1.24, 0.89, 1.37, 1.21, 1.30, 0.75, 1.42, 1.15)
# metric_3 <- c(1272, 1493, 1072, 1046, 1198, 1165, 1478, 1370, 1335)
# TE(subject, trial, metric_1, metric_2, metric_3)
```

As one can see, Subject 3 has recorded two measurements for Trial 2. One would be correct to note that this subject has also not recorded a measurement for Trial 3, hence Error 1 has also occurred in this code. If both errors occur, only the message for Error 2 is shown to the user, as it does in this example:

```{r}
# [1] "Each athlete must not have recorded multiple measurements for any trial"
```

This message is shown and offers a clear and concise indicator of what has gone wrong in the code that the user had just entered.

# Error 3: Character Vector for Metric

In the following error example, the trials are all labeled correctly, but the first metric is entered as a character vector, when it needs to be a numeric vector:

```{r}
# subject <- c(1, 1, 1, 2, 2, 2, 3, 3, 3)
# trial <- c('Trial 1', 'Trial 2', 'Trial 3', 'Trial 1', 'Trial 2', 'Trial 3', 'Trial 1', 'Trial 2', 'Trial 3')
# metric_1 <- c("abc", "def", "ghi", "jkl", "mno", "pqr", "stu", "vwx", "yzz")
# metric_2 <- c(1.11, 1.24, 0.89, 1.37, 1.21, 1.30, 0.75, 1.42, 1.15)
# metric_3 <- c(1272, 1493, 1072, 1046, 1198, 1165, 1478, 1370, 1335)
# TE(subject, trial, metric_1, metric_2, metric_3)
```

When this code is run, the following helpful error message is displayed, directly below the code that the user had just entered:

```{r}
# [1] "Each metric must be numeric"
```

Yet again, the user knows exactly why the code that he or she had just entered did not run properly.
